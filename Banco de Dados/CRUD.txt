CREATE TABLE PedidoCliente (
    codpedido serial NOT NULL,
    codmesa integer NOT NULL, 
    codproduto integer NOT NULL,
    produto varchar(20) NOT NULL,
    observacao varchar(30),
    statusPagto varchar(10),
    CONSTRAINT pedidocliente_pkey PRIMARY KEY (codpedido)
);

CREATE TABLE Mesa (
    codmesa serial NOT NULL,
    mesa varchar(10) NOT NULL,
    CONSTRAINT mesa_pkey PRIMARY KEY (codmesa)
);

CREATE TABLE Caixa (
    codcaixa serial NOT NULL,
    formPagmento varchar(10) NOT NULL,
    preco numeric(4,2) NOT NULL,
    CONSTRAINT caixa_pkey PRIMARY KEY (codcaixa)
);

CREATE TABLE Cardapio (
    codproduto serial NOT NULL, 
    produto varchar(30) NOT NULL,
    preco numeric(4,2) NOT NULL,
    CONSTRAINT cardapio_pkey PRIMARY KEY (codproduto)
);

CREATE TABLE Estoque (
    codestoque serial NOT NULL,
    codproduto integer NOT NULL,
    produto varchar(20) NOT NULL,
    descricao varchar(20) NOT NULL,
    valorProduto numeric(4,2) NOT NULL,
    quantidade integer NOT NULL,
    CONSTRAINT estoque_pkey PRIMARY KEY (codestoque, codproduto)
);

CREATE TABLE Fornecedor (
    codfornecedor serial NOT NULL,
    codpedfornecedor integer,
    nome varchar(20) NOT NULL,
    telefone varchar(20) NOT NULL,
    email varchar(20) NOT NULL,
    CONSTRAINT fornecedor_pkey PRIMARY KEY (codfornecedor)
);

CREATE TABLE PedidoFornecedor (
    codpedfornecedor serial NOT NULL,
    codproduto integer NOT NULL,
    produto varchar(20) NOT NULL,
    quantidade integer NOT NULL,
    CONSTRAINT idpedfornecedor_pkey PRIMARY KEY(codpedfornecedor)
);

CREATE TABLE Usuario (
    codusuario serial NOT NULL,
    login varchar(20) NOT NULL,
    senha varchar(20) NOT NULL,
    tipousuario varchar(10) NOT NULL,
    CONSTRAINT id_pkey PRIMARY KEY (codusuario)
);

ALTER TABLE PedidoCliente ADD CONSTRAINT fk_pedidocliente FOREIGN KEY (codmesa) REFERENCES Mesa(codmesa);
ALTER TABLE PedidoCliente ADD CONSTRAINT fk_pedclienteprod FOREIGN KEY(codproduto) REFERENCES Cardapio(codproduto);
ALTER TABLE Fornecedor ADD CONSTRAINT fk_pedfornecedor FOREIGN KEY (codpedfornecedor) REFERENCES PedidoFornecedor(codpedfornecedor);
